
<main class="main">


  <section class="offer_section" id="offer_section">
    <div class="align-items-center">
      <div class="banner_title" data-aos="fade-down" data-aos-duration="1500">
        <h1>Offers Section</h1>
      </div>
    </div>
  </section>

  <section class="product_section">
    <div class="filter_section" data-aos="zoom-in-right" data-aos-duration="1000">

      <div class="nav_path">
        <button mat-button [routerLink]=" '/' ">Home</button>
        <mat-icon *ngIf=" sectionTitle !== '' ">trending_flat</mat-icon>
        <button mat-button >{{sectionTitle}} </button>
        <mat-icon *ngIf="subCategoryName">trending_flat</mat-icon>
        <button mat-button> {{subCategoryName}} </button>
      </div>
      <div class="filter_container">
        <mat-accordion>
          <mat-expansion-panel (opened)="panelOpenState = true" (closed)="panelOpenState = false" [expanded]="isFirst">
            <mat-expansion-panel-header>
              <mat-panel-title class="filter_title_top"> Refine/ Sortby </mat-panel-title>
            </mat-expansion-panel-header>

            <mat-accordion >
              <mat-expansion-panel (opened)="panelOpenState = true" (closed)="panelOpenState = false"
                [expanded]="isFirst">
                <mat-expansion-panel-header>
                  <mat-panel-title class="filter_title">
                    Brand
                  </mat-panel-title>
                </mat-expansion-panel-header>

                <div class="toggle_body mat_panel ">
                  <section>
                    <mat-button-toggle-group [(ngModel)]="brandValue" aria-label="Font Style"
                      *ngFor="let brand of brandList">
                      <mat-button-toggle value="{{brand.name}}" (click)="filterbyBrand(brand.name)" class="Filtertogglebutton">{{brand.name}}
                      </mat-button-toggle>
                    </mat-button-toggle-group>
                  </section>
                </div>

              </mat-expansion-panel>
            </mat-accordion>

            <mat-accordion >
              <mat-expansion-panel (opened)="panelOpenState = true" (closed)="panelOpenState = false"
                [expanded]="isFirst">
                <mat-expansion-panel-header>
                  <mat-panel-title class="filter_title">
                    Size
                  </mat-panel-title>
                </mat-expansion-panel-header>

                <div class="toggle_body mat_panel">
                  <section>
                    <mat-button-toggle-group  aria-label="Font Style"
                      *ngFor="let subtask of sizeList">
                      <mat-button-toggle value="{{subtask.size}}" (click)="filterbySize(subtask.size)" class="Filtertogglebutton">{{subtask.size}}
                      </mat-button-toggle>
                    </mat-button-toggle-group>
                  </section>
                </div>

              </mat-expansion-panel>
            </mat-accordion>
            <mat-accordion >
              <mat-expansion-panel (opened)="panelOpenState = true" (closed)="panelOpenState = false"
                [expanded]="isFirst">
                <mat-expansion-panel-header>
                  <mat-panel-title class="filter_title">
                    Color
                  </mat-panel-title>
                </mat-expansion-panel-header>

                <div class="toggle_body mat_panel">
                  <section>
                    <mat-button-toggle-group aria-label="Font Style"
                      *ngFor="let subtask of colorList">
                      <mat-button-toggle value="{{subtask.color}}" (click)="filterbycolor(subtask.color)" class="Filtertogglebutton">{{subtask.color}}
                      </mat-button-toggle>
                    </mat-button-toggle-group>
                  </section>
                </div>

              </mat-expansion-panel>
            </mat-accordion>
            <form [formGroup]="form" (ngSubmit)="submit()" class="form_container">

              <mat-accordion>
                <mat-expansion-panel (opened)="panelOpenState = true" (closed)="panelOpenState = false"
                  [expanded]="isFirst">
                  <mat-expansion-panel-header>
                    <mat-panel-title class="filter_title">
                      Price
                    </mat-panel-title>
                  </mat-expansion-panel-header>

                  <div class="betweenKeyInputs">


                    <mat-form-field class="inputPrimary">
                      <input matInput type="number" formControlName="startprice">
                      <span matSuffix>{{currencyType}}</span>
                    </mat-form-field>
                    <span class="betweenlable"> to</span>
                    <mat-form-field class="inputPrimary">
                      <input matInput type="number" formControlName="endprice">
                      <span matSuffix>{{currencyType}}</span>
                    </mat-form-field>

                  </div>
                  <button mat-button type="submit" class="filter_submit_button">apply</button>

                </mat-expansion-panel>
              </mat-accordion>

            </form>

          </mat-expansion-panel>
        </mat-accordion>
      </div>

    </div>


    <div class="preview_section" data-aos="zoom-in-left" data-aos-duration="1000">


      <div class="Tool_bar">
        <button mat-button class="mat_button" (click)="resetFilter()">
          <mat-icon>restore</mat-icon>reset
        </button>

        <span class="example-spacer"></span>
        <mat-form-field>
          <mat-select (selectionChange)="changeSorting($event.value)" value="lable">
            <mat-option value="lable" disabled="">sort by preference</mat-option>
            <mat-option value="LowToHigh">Price: Low to High</mat-option>
            <mat-option value="HighToLow">Price: High to Low</mat-option>
            <mat-option value="latest">Latest Arrivals</mat-option>
            <mat-option value="rating">Customer Review</mat-option>

          </mat-select>
        </mat-form-field>
      </div>
      <div *ngIf="products.length ===0">
        <div class="emptyfilterResult">
          <img src="../../../../../../assets/images/undraw_empty_re_opql (1).svg" alt="">
        </div>
        <h2 class="emptyfilterResultH2">Sorry, no results found! <br> Please try something else</h2>
      </div>
      <div class="row" *ngIf="products.length>0">
        <div class="col-xl-3 col-md-4 col-lg-4 col-sm-4 col-6" *ngFor="let img of dataSource$ | async">
          <div class="card">
            <img src="{{img.image['original']}}" alt="Photo of {{img.name}}" class=""
              [routerLink]="'/previewProduct/' + img.id">
            <button mat-icon-button class="banner_explore_button" (click)="openSnackBar(img.id)" matRipple
              matRippleColor="green">
              <mat-icon>favorite_border</mat-icon>
            </button>

            <div class="card-body" [routerLink]="'/previewProduct/' + img.id">
              <div class="card-title">{{img.name}}</div>
              <div class="card-subtitle text-muted">Card subtitlle</div>
              <div>
                <b class='item' *ngIf="currencyType === 'EUR' "> €{{img['OfferEuro']}}</b>
                <b class='item' *ngIf="currencyType === 'USD' "> ${{img['OfferDollar'] }}</b>
                <b class='item' *ngIf="currencyType === 'SAR' "> SAR{{img['OfferSAR']}} </b>
                <b class='item' *ngIf="currencyType === 'GBP' ">£{{img['OfferSterling']}}</b>
                <b class='item' *ngIf="currencyType === 'AED' ">د.إ{{img['OfferDirham']}}</b>
                <span class='offer_price item' *ngIf="currencyType === 'EUR' "> €{{img['productpriceEuro']}} </span>
                <span class='offer_price item' *ngIf="currencyType === 'USD' "> ${{img['productpriceDollar'] }}</span>
                <span class='offer_price item' *ngIf="currencyType === 'SAR' "> SAR{{img['productpriceSAR']}} </span>
                <span class='offer_price item' *ngIf="currencyType === 'GBP' "> £{{img['productpriceSterling']}}</span>
                <span class='offer_price item' *ngIf="currencyType === 'AED' "> د.إ{{img['productpriceDirham']}}</span>

                <span class='offer_percentage item '
                  *ngIf="currencyType === 'EUR' ">{{img['OfferPecentageEuro']}}off</span>
                <span class='offer_percentage item '
                  *ngIf="currencyType === 'USD' ">{{img['OfferPecentageDollar']}}off</span>
                <span class='offer_percentage item '
                  *ngIf="currencyType === 'SAR' ">{{img['OfferPecentageSAR']}}off</span>
                <span class='offer_percentage item '
                  *ngIf="currencyType === 'GBP' ">{{img['OfferPecentageSterling']}}off</span>
                <span class='offer_percentage item '
                  *ngIf="currencyType === 'AED' ">{{img['OfferPecentageDirham']}}off</span>
              </div>
            </div>

          </div>

        </div>


      </div>
      <!-- <ngx-skeleton-loader [style.display]="loading ? '': 'none'" class="col-xl-3 col-lg-4 col-sm-6 col-6" count="12" animation="progress">
      </ngx-skeleton-loader> -->
      <mat-paginator *ngIf="products.length>0" [style.display]="loading ? 'none': ''" [length]="totalItems"
        [pageSizeOptions]="[12, 15, 100]" [pageIndex]="0" aria-label="Select page">
      </mat-paginator>


    </div>

  </section>


</main>
